v1.5.4: Fix completed loops bleeding into unrelated sessions

Add permanent completion state to prevent completed phil-connors loops
from injecting context into unrelated Claude sessions.

Changes:
- Add `completed` flag checked before `active` - completed loops never inject
- Clear `task_id` on completion as additional safeguard
- Add `state_set_completed()` helper for atomic completion state updates
- Improve promise detection: detect tag presence, not just exact match
- Add file locking (mkdir-based) to prevent race conditions
- Initialize new state fields: completed, completed_at, completed_reason
- Mark max_iterations and legacy loops as completed (not just inactive)
- Add debug logging for inactive state exits

Co-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>
